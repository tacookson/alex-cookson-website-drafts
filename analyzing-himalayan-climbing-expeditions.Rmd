---
title: Analyzing Himalayan climbing expeditions
author: Alex Cookson
date: '2020-03-22'
slug: analyzing-himalayan-climbing-expeditions
categories: []
tags: []
description: ''
topics: []
---  
\  

In this series of posts, we will analyze climbing expeditions to the Himalayas, a mountain range comprising over 50 mountains, including [Mount Everest](https://en.wikipedia.org/wiki/Mount_Everest), the highest mountain (above sea level) in the world.  
\  

This is *Part 1* of a three-part series:

- Part 1: Peaks, heights, and first ascents
- Part 2: Everest expeditions
- Part 3: Himalayan expeditions overall (excluding Mount Everest)  
\  

This post will focus on getting an overview of the Himalayan peaks, especially their height, whether they've been summitted, and (if they have) when the first ascent was and who was involved.  
\  


## The Himalayan Database

The data comes from [The Himalayan Database](https://www.himalayandatabase.com/), a truly impressive and comprehensive dataset with records on over 10,000 climbing expeditions from 1905 to 2019 for more than 450 significant peaks in the Nepal Himalayas. According to the database website:

> The Himalayan Database is a compilation of records for all expeditions that have climbed in the Nepal Himalaya. The database is based on the expedition archives of Elizabeth Hawley, a longtime journalist based in Kathmandu, and it is supplemented by information gathered from books, alpine journals and correspondence with Himalayan climbers.

You can download a program from the website to explore the database, but it uses Microsoft Visual FoxPro, which I couldn't get to work. I read the database tables directly and converted them into CSV files.  
\  


## Setup

First, we'll load the `tidyverse` and some other useful packages:

- `fishualize` for ggplot2 colour palettes inspired by fish. A big thank you to [Nina Schiettekatte](https://twitter.com/NinaSchiett/status/1180070737471852545) for making this package and [Maia Pelletier](https://twitter.com/MaiaPelletier/status/1242869023437664259) for introducing it to me!
- `glue` for combining R code and character strings easily
- `scales` for turning ugly numbers into pretty numbers (e.g., 0.3 to 30%)
- `extrafont` for additional fonts to use in graphs (I like [Bahnschrift / DIN 1451](https://en.wikipedia.org/wiki/DIN_1451))

We'll also set a default `ggplot2` theme and import our data. `peaks` has information on the peaks themselves, `expeditions` details individual expeditions, and `members` looks at individual members of those expeditions.

```{r, warning = FALSE, message = FALSE}
library(tidyverse)
library(fishualize)
library(glue)
library(scales)
library(extrafont)

theme_set(theme_light())

peaks <- readr::read_csv("https://raw.githubusercontent.com/tacookson/data/master/himalayan-expeditions/peaks.csv")
expeditions <- readr::read_csv("https://raw.githubusercontent.com/tacookson/data/master/himalayan-expeditions/expeditions.csv")
members <- readr::read_csv("https://raw.githubusercontent.com/tacookson/data/master/himalayan-expeditions/members.csv")
```  
\  


## Data inspection

Even though we're loading all the tables, our focus is on getting a general sense of the peaks, so we will almost exclusively use the `peaks` dataset. Let's take a look.

```{r}
peaks %>%
  glimpse()
```

We have the name and height of the peaks (including any alternative names), whether they've been summitted, and the year and countries associated with the first ascent for peaks that *have* been summitted. Countries are listed if an expedition member who reached the summit was a citizen of that country. It's possible for countries to have citizens in an expedition, but not listed here are part of the first ascent. For example, the first ascent of Mount Everest lists two countries -- India (for Tenzing Norgay) and New Zealand (for Edmund Hillary) -- even though non-summitting expedition members included people from the United Kingdom and Nepal.

(Note: there is some [debate about Tenzing Norgay's nationality](https://en.wikipedia.org/wiki/Talk%3ATenzing_Norgay#Tenzing_Norgay's_nationality). I'm not even close to an expert on this topic, so I will defer to the records in the Himalayan Database, which lists his citizenship as "India".)  
\  


## How high are Himalayan peaks?

People generally know that Mount Everest is the tallest mountain in the world, but I personally don't know much about other Himalayan peaks. How tall are they?

```{r}
peaks %>%
  ggplot(aes(height_metres)) +
  geom_histogram(binwidth = 200,
                 fill = "cadetblue4",
                 alpha = 0.8) +
  annotate("text", 8450, 17, label = "Mount Everest") +
  annotate(
    "curve",
    x = 8500,
    y = 15,
    xend = 8775,
    yend = 2,
    curvature = -0.25,
    arrow = arrow(length = unit(2, "mm"))
  ) +
  labs(title = "How tall are Himalayan peaks?")
```

Not surprisingly, Mount Everest is the tallest at almost 9,000 metres. There is a small group of other very tall mountains referred to as [8000ers](https://www.mountainiq.com/guides/eight-thousanders/), something I learned while researching for this post. Most peaks are between 6,000 and 7,000 metres, though -- still crazy-high.  
\  


## When were Himalayan peaks first climbed?

We have data on first ascents.

```{r}
peaks %>%
  ggplot(aes(climbing_status, fill = climbing_status)) +
  geom_bar() +
  scale_fill_fish(option = "Pseudocheilinus_tetrataenia",
                  discrete = TRUE) +
  theme(legend.position = "none")
```


```{r, warning = FALSE, message = FALSE}
peaks %>%
  ggplot(aes(first_ascent_year)) +
  geom_histogram(fill = "cadetblue4", alpha = 0.8)
```

Find mistaken record and look up the expedition_id from `expeditions` to see if it has the correct year

```{r}
peaks %>%
  filter(first_ascent_year < 1000) %>%
  left_join(
    expeditions %>% select(expedition_id, year),
    by = c("first_ascent_expedition_id" = "expedition_id")
  )
```

Fix first ascent year for Sharpu II (code SPH2)

```{r}
peaks_fixed <- peaks %>%
  mutate(first_ascent_year = ifelse(peak_id == "SPH2", 2018, first_ascent_year))
```

Visualize distribution of first ascent years

```{r}
peaks_fixed %>%
  ggplot(aes(first_ascent_year)) +
  geom_histogram(binwidth = 5, fill = "cadetblue4", alpha = 0.8) +
  labs(title = "Year of first ascent")
```

## Which countries were involved in first ascents?

Count countries associated with first ascents (collapsed "W Germany" into "Germany")

```{r}
top_20_countries <- peaks_fixed %>%
  filter(!is.na(first_ascent_country)) %>%
  separate_rows(first_ascent_country, sep = ",") %>%
  mutate(
    first_ascent_country = str_squish(first_ascent_country),
    first_ascent_country = ifelse(
      first_ascent_country == "W Germany",
      "Germany",
      first_ascent_country
    )
  ) %>%
  count(first_ascent_country, name = "first_ascents", sort = TRUE) %>%
  mutate(first_ascent_country = fct_reorder(first_ascent_country, first_ascents)) %>%
  top_n(20, wt = first_ascents)

top_20_countries %>%
  ggplot(aes(first_ascents, first_ascent_country, fill = first_ascent_country)) +
  geom_col() +
  scale_fill_fish(option = "Pseudocheilinus_tetrataenia",
                  discrete = TRUE) +
  labs(title = "Countries with the most first ascents of Himalayan peaks",
       caption = "Source: The Himalayan Database",
       x = "Number of first ascents",
       y = "") +
  theme(legend.position = "none",
        text = element_text(family = "Bahnschrift"))
```

Have the countries involved in first ascents changed over time?

```{r}
countries_by_decade <- peaks_fixed %>%
  filter(!is.na(first_ascent_country),
         first_ascent_year >= 1910) %>%
  separate_rows(first_ascent_country, sep = ",") %>%
  mutate(
    first_ascent_country = str_squish(first_ascent_country),
    first_ascent_country = ifelse(
      first_ascent_country == "W Germany",
      "Germany",
      first_ascent_country
    ),
    first_ascent_decade = first_ascent_year %/% 10 * 10,
    first_ascent_country = fct_lump(first_ascent_country, 8)
  ) %>%
  count(first_ascent_country,
        first_ascent_decade,
        name = "first_ascents") %>%
  group_by(first_ascent_decade) %>%
  mutate(pct_of_ascents = first_ascents / sum(first_ascents)) %>%
  ungroup() %>%
  mutate(
    first_ascent_country = fct_reorder(first_ascent_country, -first_ascents, sum),
    first_ascent_country = fct_relevel(first_ascent_country, "Other", after = Inf)
  )

countries_by_decade %>%
  ggplot(aes(first_ascent_decade, pct_of_ascents, fill = first_ascent_country)) +
  geom_col() +
  scale_x_continuous(breaks = seq(1930, 2010, 10)) +
  scale_y_continuous(labels = percent_format(accuracy = 1)) +
  scale_fill_fish(option = "Pseudocheilinus_tetrataenia",
                  discrete = TRUE) +
  facet_wrap( ~ first_ascent_country) +
  labs(title = "Percent of first ascents involving an expedition member from this country",
       caption = "Source: The Himalayan Database",
       x = "Decade of first ascent",
       y = "") +
  theme(text = element_text(family = "Bahnschrift"),
        legend.position = "none",
        panel.grid.major.x = element_blank(),
        panel.grid.minor = element_blank(),
        strip.text = element_text(colour = "black"),
        strip.background = element_blank())
```






## Appendix

### Preliminary Questions

Peaks:

- How tall are Himalayan peaks?
- When were they first climbed?
- What countries were involved in first ascents?


Expeditions:

- What peaks were the most popular to climb?
- How big are expeditions?
- How many people are typically hired?
- What are the success rates of expeditions?
- Why do expeditions fail?
- What is the threat rate for injuries and deaths?
- Are there any particularly dangerous peaks?
- What proportion of expeditions use oxygen?


Members:

- What's the typical composition of expedition members? Age, sex, citizenship?
- Are any particular mountains more popular with certain countries?
- Are there any particularly dangerous expedition roles
- What types of injuries and causes of death are there?
- Are there any particularly dangerous elevations?
- Are younger climbers more likely to attempt solo climbs or not use oxygen?
