---
title: Analyzing Himalayan climbing expeditions
author: Alex Cookson
date: '2020-04-01'
slug: analyzing-himalayan-climbing-expeditions
categories: []
tags: []
description: ''
topics: []
---  
\  

In this series of posts, we will analyze climbing expeditions to the Himalayas, a mountain range comprising over 50 mountains, including [Mount Everest](https://en.wikipedia.org/wiki/Mount_Everest), the tallest mountain in the world.  
\  

This is *Part 2* of a three-part series:

- [Part 1 looked at Himalayan peaks and their first ascents](https://www.alexcookson.com/post/analyzing-himalayan-peaks-first-ascents/)
- Part 2 (this post) looks at Everest expeditions
- Part 3 will look at Himalayan expeditions overall (excluding Mount Everest) *(coming soon)*  
\  

This post will focus on expeditions to Mount Everest, the most famous Himalayan peak and the tallest mountain in the world. Everest expeditions have received some mainstream media attention fairly recently, with [reports](https://www.nationalgeographic.com/adventure/2019/05/everest-season-deaths-controversy-crowding/) [about](https://www.nytimes.com/2019/05/26/world/asia/mount-everest-deaths.html) [overcrowding](https://www.bbc.com/news/world-asia-48401491) and whether or not this overcrowding plays a role in the deaths of some climbers. (It's an interesting topic -- I recommend reading the linked articles.)

We will do our own exploration of Everest expeditions using data from [The Himalayan Database](https://www.himalayandatabase.com/). In particular, we'll investigate:

- How popular is Mount Everest?
- What time of year do people climb?
- How dangerous is climbing Everest?  
\  


## Setup

First, we'll load the `tidyverse` and some other useful packages:

- `fishualize` for ggplot2 colour palettes [inspired by fish](https://cran.r-project.org/web/packages/fishualize/vignettes/overview_colors.html)
- `scales` for turning ugly numbers into pretty numbers (e.g., 0.3 to 30%)
- `extrafont` for additional fonts to use in graphs

We'll also set a default `ggplot2` theme and import our data.

```{r setup, warning = FALSE, message = FALSE}
library(tidyverse)
library(fishualize)
library(scales)
library(extrafont)
library(ggtext)

theme_set(theme_light())

peaks <- readr::read_csv("https://raw.githubusercontent.com/tacookson/data/master/himalayan-expeditions/peaks.csv")
expeditions <- readr::read_csv("https://raw.githubusercontent.com/tacookson/data/master/himalayan-expeditions/expeditions.csv")
members <- readr::read_csv("https://raw.githubusercontent.com/tacookson/data/master/himalayan-expeditions/members.csv")
```  
\  


## Data inspection

We have two data tables to investigate: `expeditions`, which has data on entire climbing expeditions, and `members`, which has data on the individual members of those expeditions.

Let's start with **expeditions**.

```{r glimpse-expeditions}
expeditions %>%
  glimpse()
```

`expeditions` has four types of data:

1. Basic data on the peak. We could bring in the `peaks` table if we wanted information like alternative names or heights.
2. Important expedition dates -- when they reached basecamp, when they reached the summit, and when the expedition ended
3. "Outcomes", including elevation highpoint and the reason for the expedition ending
4. Miscellaneous additional data, like number of members, deaths, and whether oxygen was used  
\  

What about expedition **members**?

```{r glimpse-members}
members %>%
  glimpse()
```

`members` also has four types of data:

1. Some of the same data from the `peaks` and `expeditions` tables, here for convenience
2. Demographic data, like age and sex
3. Individual outcomes, like elevation high and unfortunate "outcomes" like injury and death
4. Miscellaneous additional data, like expedition role and whether the individual used oxygen  
\  

Now that we have a general sense of our data, let's create "Everest versions" of `expeditions` and `members`. Then, we can start answering our questions.

```{r create-everest-dataframes}
everest_expeditions <- expeditions %>%
  filter(peak_name == "Everest")

everest_members <- members %>%
  filter(peak_name == "Everest")
```  
\  


## How popular is Mount Everest?

As I noted in the introduction, media outlets like the BBC and the New York Times have reported on criticisms of overcrowding at Mount Everest. Just how crowded is it? And how has that changed over time? Let's look at the **number of expeditions** and the **number of climbers** each year since the first recorded expedition in 1921.

```{r graph-expeditions, fig.align = 'center', fig.width = 8, fig.asp = 0.618}
everest_expeditions %>%
  group_by(year) %>%
  # Capitalizing names so they'll look nice in the graph
  summarise(Expeditions = n(),
            Climbers = sum(members + hired_staff)) %>%
  ungroup() %>%
  # There are implicit zeros, especially before 1950
  # Use complete() to turn them into explicit zeros
  complete(year = 1920:2019,
           fill = list(Expeditions = 0, Climbers = 0)) %>%
  gather("category", "number", -year) %>%
  ggplot(aes(year, number, fill = year)) +
  geom_col() +
  facet_wrap( ~ category, scales = "free_y") +
  scale_x_continuous(breaks = seq(1920, 2020, 10)) +
  scale_y_continuous(labels = label_comma()) +
  scale_fill_fish(option = "Pseudocheilinus_tetrataenia",
                  direction = 1) +
  labs(
    title = "Everest's popularity has soared since the 1980s",
    caption = "Source: The Himalayan Database",
    x = "",
    y = ""
  ) +
  theme(
    legend.position = "none",
    text = element_text(family = "Bahnschrift"),
    panel.grid.minor = element_blank(),
    strip.text = element_text(size = 12, colour = "black"),
    strip.background = element_blank()
  )
```

The graphs themselves look like mountains! Everest has become much more popular since the 1980s. For the past 20 years, a typical year would see about 75-100 expeditions comprising 800-1,200 climbers.  
\  


## What time of year do people climb?

Many parts of the world are nicer to visit during certain times of the year. If you visit Toronto, Canada (my hometown), a July trip will be a much different experience than a November trip. Is Mount Everest any different?

```{r graph-seasons, fig.align = 'center', fig.width = 8, fig.asp = 0.8}
everest_expeditions %>%
  mutate(
    decade = year %/% 10 * 10,
    season = fct_relevel(season, "Spring", "Summer", "Autumn", "Winter")
  ) %>%
  count(decade, season, name = "expeditions") %>%
  ggplot(aes(decade, expeditions, fill = season)) +
  geom_col() +
  scale_x_continuous(breaks = seq(1920, 2010, 10)) +
  scale_fill_fish(option = "Pseudocheilinus_tetrataenia",
                  discrete = TRUE,
                  direction = -1) +
  facet_wrap(~ season) +
  labs(
    title = "Spring is the most popular time to climb Mount Everest",
    subtitle = "Number of expeditions (1921-2019)",
    caption = "Source: The Himalayan Database",
    x = "",
    y = ""
  ) +
  theme(
    legend.position = "none",
    text = element_text(family = "Bahnschrift"),
    panel.grid.minor = element_blank(),
    strip.text = element_text(size = 12, colour = "black"),
    strip.background = element_blank()
  )
```

Spring expeditions are by far the most common. There are almost no expeditions during the summer, likely because it is [monsoon season](https://iantaylortrekking.com/blog/what-is-the-best-time-of-year-to-trek-everest-base-camp/), a period with obviously less-than-ideal conditions for an arduous, weather-dependent climb. In fact, according to [an article in Popular Mechanics](https://www.popularmechanics.com/adventure/outdoors/a7725/why-does-everyone-climb-everest-in-may-9035510/), May is generally considered the best month to climb because it has the best weather -- lower wind speeds and higher temperatures. Our data supports this idea: looking at expeditions we have a summit date for, almost 80% of them are in May.

```{r graph-months, fig.align = 'center', fig.width = 8, fig.asp = 0.618}
everest_expeditions %>%
  filter(!is.na(highpoint_date)) %>%
  mutate(highpoint_month = lubridate::month(highpoint_date, label = TRUE)) %>%
  ggplot(aes(highpoint_month, y = ..prop.., group = 1)) +
  geom_bar(stat = "count",
           fill = "#373142FF", alpha = 0.7) +
  scale_y_continuous(breaks = seq(0, 0.8, 0.1),
                     labels = label_percent(accuracy = 1)) +
  labs(
    title = "Almost 80% of Everest expeditions reached their highpoint in May",
    subtitle = "Percent of expeditions by month of reaching their highpoint (1921-2019)",
    caption = "Source: The Himalayan Database",
    x = "",
    y = ""
  ) +
  theme(text = element_text(family = "Bahnschrift"),
        panel.grid.minor = element_blank())
```  
\  

However, [autumn climbing](https://en.wikipedia.org/wiki/Mount_Everest#Autumn_climbing) was more popular in the late 20th century. In fact, in the 1980s, the majority of expeditions took place during autumn. Why? A [2003 article](http://faculty.washington.edu/hueyrb/pdfs/AAJEverest2003.pdf) in *The American Alpine Journal* notes that 1963-1990s was "an era of bold climbing", with many climbers attempting alternative routes. Maybe these alternatives routes were more feasible in the autumn or bold climbers sought out the novelty and challenge of an autumn climb.

```{r graph-seasons-by-decade, fig.align = 'center', fig.width = 8, fig.asp = 0.8}
everest_expeditions %>%
  filter(year >= 1960) %>%
  mutate(
    decade = paste0(year %/% 10 * 10, "s"),
    season = fct_relevel(season, "Spring", "Summer", "Autumn", "Winter")
  ) %>%
  count(decade, season, name = "expeditions") %>%
  group_by(decade) %>%
  mutate(pct_expeditions = expeditions / sum(expeditions)) %>%
  ungroup() %>%
  ggplot(aes(season, pct_expeditions, fill = season)) +
  geom_col() +
  scale_y_continuous(breaks = seq(0, 1, 0.2),
                     labels = label_percent(accuracy = 1)) +
  scale_fill_fish(option = "Pseudocheilinus_tetrataenia",
                  discrete = TRUE,
                  direction = -1) +
  facet_wrap(~ decade) +
  labs(
    title = "Autumn expeditions were more popular in the '70s, '80s, and '90s",
    subtitle = "Percent of expeditions by season (1921-2019)",
    caption = "Source: The Himalayan Database",
    x = "",
    y = ""
  ) +
  theme(
    legend.position = "none",
    text = element_text(family = "Bahnschrift"),
    panel.grid.minor = element_blank(),
    strip.text = element_text(size = 12, colour = "black"),
    strip.background = element_blank()
  )
```  
\  


## How dangerous is climbing Everest? 

TEXT


Injuries and heights

```{r}

```


## Conclusion

CONCLUSION TEXT

If you enjoyed this post, [let me know](https://twitter.com/alexcookson) on Twitter and read the other posts analyzing this dataset:

- [Part 1 looked at Himalayan peaks and their first ascents](https://www.alexcookson.com/post/analyzing-himalayan-peaks-first-ascents/)
- Part 3 will look at Himalayan expeditions overall (excluding Mount Everest) *(coming soon)*







## Appendix

Expeditions:

- What peaks were the most popular to climb?
- How big are expeditions?
- How many people are typically hired?
- What are the success rates of expeditions for different peaks?
- Why do expeditions fail?
- What is the threat rate for injuries and deaths?
- Are there any particularly dangerous peaks?
- What proportion of expeditions use oxygen?


Members:

- What's the typical composition of expedition members? Age, sex, citizenship?
- Are any particular mountains more popular with certain countries?
- Are there any particularly dangerous expedition roles
- What types of injuries and causes of death are there?
- Are there any particularly dangerous elevations?
- Are younger climbers more likely to attempt solo climbs or not use oxygen?


Number of expeditions by peak

```{r graph-expeditions-by-peak, eval = FALSE}
expeditions %>%
  inner_join(peaks %>% select(peak_id, height_metres), by = "peak_id") %>%
  mutate(eight_thousander = height_metres >= 8000) %>%
  count(peak_id, peak_name, eight_thousander, name = "expeditions") %>%
  mutate(peak_name = fct_reorder(peak_name, expeditions)) %>%
  top_n(20, wt = expeditions) %>%
  ggplot(aes(expeditions, peak_name, fill = eight_thousander)) +
  geom_col() +
  scale_x_continuous(labels = label_comma()) +
  scale_fill_manual(values = c("#6baed6", "#08519c")) +
  labs(title = "<span style = 'color:#08519c'>**8000ers**</span> are more popular than <span style = 'color:#6baed6'>**other**</span> Himalayan mountains",
       subtitle = "All expeditions from 1905-2019",
       caption = "Source: The Himalayan Database",
       x = "Number of expeditions",
       y = "") +
  theme(
    legend.position = "none",
    text = element_text(family = "Bahnschrift"),
    plot.title = element_markdown()
  )
```


```{r, eval = FALSE}
# Total
everest_members %>%
  count(citizenship, sort = TRUE) %>%
  mutate(country = fct_lump(citizenship, 19, w = n),
         country = fct_reorder(country, n)) %>%
  ggplot(aes(n, country, fill = country)) +
  geom_col() +
  scale_fill_fish(option = "Pseudocheilinus_tetrataenia",
                  discrete = TRUE) +
  theme(legend.position = "none")

# By Decade
everest_members %>%
  count(decade = year %/% 10 * 10, citizenship, sort = TRUE) %>%
  mutate(country = fct_lump(citizenship, 19, w = n),
         country = fct_reorder(country, n, sum)) %>%
  ggplot(aes(n, country, fill = country)) +
  geom_col() +
  scale_fill_fish(option = "Pseudocheilinus_tetrataenia",
                  discrete = TRUE) +
  facet_wrap( ~ decade) +
  theme(legend.position = "none")

everest_members %>%
  mutate(country_code = countrycode::countrycode(citizenship, "country.name", "iso3c", warn = FALSE),
         continent = countrycode::countrycode(country_code, "iso3c", "continent")) %>%
  count(citizenship, continent, sort = TRUE) %>%
  mutate(country = fct_lump(citizenship, 29, w = n),
         country = fct_reorder(country, n)) %>%
  ggplot(aes(n, country, fill = continent)) +
  geom_col() +
  scale_fill_fish(option = "Pseudocheilinus_tetrataenia",
                  discrete = TRUE)
```

Age

```{r, eval = FALSE}
# Age and death rates
everest_members %>%
  group_by(age = age %/% 10 * 10) %>%
  summarise(injury_rate = mean(injured),
            death_rate = mean(died),
            n = n()) %>%
  ungroup() %>%
  ggplot(aes(age, death_rate)) +
  geom_point(aes(size = n))

# Count of injury types
everest_members %>%
  filter(injured) %>%
  count(injury_type, sort = TRUE)

# Use of oxygen
everest_members %>%
  count(sex, oxygen_used) %>%
  group_by(sex) %>%
  mutate(pct = n / sum(n)) %>%
  ungroup()

everest_expeditions %>%
  count(termination_reason) %>%
  mutate(termination_reason = case_when(str_detect(termination_reason, "Route technically") ~ "Route technically too difficult",
                                        str_detect(termination_reason, "Bad conditions") ~ "Bad conditions",
                                        TRUE ~ termination_reason),
         termination_reason = fct_reorder(termination_reason, n)) %>%
  ggplot(aes(n, termination_reason, fill = termination_reason)) +
  geom_col() +
  theme(legend.position = "none")
```

Description of `ggtext` for part 3:

- `ggtext`, which "provides rich-text (basic HTML and Markdown) support for ggplot2" (from the package's [GitHub](https://github.com/wilkelab/ggtext))


```{r graph-expeditions-appendix, fig.align = 'center', fig.width = 8, fig.asp = 0.618}
everest_expeditions %>%
  group_by(year) %>%
  # Capitalizing names so they'll look nice in the graph
  summarise(Expeditions = n(),
            Climbers = sum(members + hired_staff)) %>%
  ungroup() %>%
  # There are implicit zeros, especially before 1950
  # Use complete() to turn them into explicit zeros
  complete(year = 1920:2019,
           fill = list(Expeditions = 0, Climbers = 0)) %>%
  gather("category", "number",-year) %>%
  ggplot(aes(year, number)) +
  geom_line(col = "#373142FF") +
  geom_area(fill = "#373142FF", alpha = 0.7) +
  facet_wrap(~ category, scales = "free_y") +
  scale_x_continuous(breaks = seq(1920, 2020, 10)) +
  scale_y_continuous(labels = label_comma()) +
  labs(
    title = "Everest's popularity has soared since the 1980s",
    caption = "Source: The Himalayan Database",
    x = "",
    y = ""
  ) +
  theme(
    text = element_text(family = "Bahnschrift"),
    panel.grid.minor = element_blank(),
    strip.text = element_text(size = 12, colour = "black"),
    strip.background = element_blank()
  )
```
